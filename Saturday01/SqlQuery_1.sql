DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'EntityFramework.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '202412280729355_InitailData'
BEGIN
    CREATE TABLE [dbo].[Genres] (
        [Id] [tinyint] NOT NULL,
        [Name] [nvarchar](max),
        CONSTRAINT [PK_dbo.Genres] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Videos] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](max),
        [ReleaseDate] [datetime] NOT NULL,
        CONSTRAINT [PK_dbo.Videos] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202412280729355_InitailData', N'EntityFramework.Migrations.Configuration',  0x1F8B0800000000000400D558DB6EDB38107D5FA0FF20E8A9C5A6662E2FDB406E913A4D116C9D04919B775A1A2B44295225A9ACFD6DFBB09FB4BFD0A144DD7D4B52A4BB081048E4CC992B8747FEF7EF7F820FCB947B0FA0349362EC1F8D0E7D0F4424632692B19F9BC5DB3FFC0FEF5FFD167C8AD3A57757C99D5839D4147AECDF1B939D12A2A37B48A91EA52C5252CB85194532253496E4F8F0F01D393A2280103E62795E709B0BC352285EF07522450499C9299FCA18B876EBB81316A8DE154D41673482B1FF0935CDEA42E1CA5F527DF3BD33CE28BA11025FF81E15421A6AD0C9D3AF1A42A3A448C20C17289FAD3240B905E51A9CF3A78DF8BE711C1EDB3848A3584145B936327D24E0D1894B0CE9AB3F29BD7E9D384C5D99281B7591BEB1FF1984C2C8FB964E275C59A9416A47374A26F8F27BA178E0F5B60FEA76C0AEB17F07DE24E726573016901B45F9817793CF398BFE84D54C7E03311639E76D1FD14BDCEB2CE0129ACD4099D52D2C9CE797B1EF91AE1EE92BD66A2D9D32AC8F2B83615FA16D3AE7507700D9AA6EFF5700D846781C7C6F4A975F4024E67EECE3A3EF5DB025C4D58A43FD2A189E1E54322AEF1909485392AD85BA6331C8A714AA50FCFF16EA529893E335956AA520345201F623286A20BEA1C6801216038A987F415587466E8103D5704E4D6DCB3ECF58BAAB0DB777084E494319865EDBC1778ED0744DAFE0F473EDA29DD75D9F4BC8108C034BEC19D7BED738508ED4919B1A64BBFA83EDBC75EAAE97D74559C7D38C7B52CEFBEA5E201B2E86604AB30C8BD7BA28DC8A1796B7C4E46DF8F8099A961824D26B0669ED6D6D095B9126D0DB45D3E8E90553DAD8CACCA9ADF1244E0762ADEA6D486D65A853A0FE196C125E89DBE752A53F26CA52F6109ADCA16092A257456450BB515D1C03BDE27AA69CAA35077A22799E8A4D43619B767944DBFAE5CA1021203DC7FBB92183E4F446533FD57B15C2B5FA730A511E8AC7176283DEAF2EC42684CE206C0375365EB8B083E9D317A9ADD753A8376D0277F27773D5C12828457C0F1365DB08C740B8D206D291151885DFF984338CB7119852C116A04D792DFBC8188F7B8CF7BFC33E89D631DF8782BE38B1304CAC984DEB3348A078A02ABAA7EA754A976FDA48CF267A2F9E8E22153B99D4CBE46A2FFA14E3B3F9D9F469784F6FA7388E086D2248E5D1465FE7487766A58F9F1DA9DA419E1C47DAC49DD621DF39BEF5445E359C6001697F9307E7A059D240D82F7401911D0D0D6825732916B2AA2106D5F6A812E995780A86624DE999326C412383DB11685DD0F13BCA737B65A673882FC5756EB2DC9C690DE99C77E87D40B6DB2FC863D7E7E03AB36FFA6784806E32DB96D7E263CE785CFB7DB1A62D3740D806740710BDC2CF11844B5635D295147B02B9F49D4306C21EDF19A41947307D2D42FA004FF10D3F1FBE4042A35575116D06D95D886EDA837346EDD7AA76188DBEFD9D89D81F9ADEFF0049DA64A39A120000 , N'6.5.1')
END

IF @CurrentMigration < '202412280901415_AddManyToManyRelationship'
BEGIN
    CREATE TABLE [dbo].[VideoGenres] (
        [Video_Id] [int] NOT NULL,
        [Genre_Id] [tinyint] NOT NULL,
        CONSTRAINT [PK_dbo.VideoGenres] PRIMARY KEY ([Video_Id], [Genre_Id])
    )
    CREATE INDEX [IX_Video_Id] ON [dbo].[VideoGenres]([Video_Id])
    CREATE INDEX [IX_Genre_Id] ON [dbo].[VideoGenres]([Genre_Id])
    ALTER TABLE [dbo].[VideoGenres] ADD CONSTRAINT [FK_dbo.VideoGenres_dbo.Videos_Video_Id] FOREIGN KEY ([Video_Id]) REFERENCES [dbo].[Videos] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[VideoGenres] ADD CONSTRAINT [FK_dbo.VideoGenres_dbo.Genres_Genre_Id] FOREIGN KEY ([Genre_Id]) REFERENCES [dbo].[Genres] ([Id]) ON DELETE CASCADE
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202412280901415_AddManyToManyRelationship', N'EntityFramework.Migrations.Configuration',  0x1F8B0800000000000400DD59DB6EDB3618BE1FB0771074B5436AE570B319768BD4698AA04D1CC449B0BB80917E3B44294A23A9CCC6B027DBC51E69AFB09F3A8B942CD92DD26D08105822FFF3C7FF40FDFDE75F9337EB9039CF20248DF8D43D1A1DBA0E703F0A285F4DDD442D5FFDE4BE79FDED37937741B876EE8B7D277A1F527239759F948AC79E27FD2708891C85D417918C966AE447A14782C83B3E3CFCD93B3AF20059B8C8CB71263709573484F4011F6711F7215609619751004CE6EF7165917275AE480832263E4CDD7748A936E702DFFC16894FAE73CA28413516C096AE43388F1451A8E4F84EC2428988AF1631BE20EC761303EE5B122621577E5C6D1F6AC7E1B1B6C3AB080B567E225514EEC8F0E824778C6792EFE55EB7741CBA2E7394B63A75DFD47D0F5CA0E5A6A4F18C09BDCB72EDE85A442B7CF831253C708CE583120E881AFD77E0CC12A61201530E8912841D38D7C923A3FE07D8DC469F804F79C2585D47D412D71A2FF0158A8D41A8CD0D2C73CD2F02D7F19A749E495892D56832B3DE6E149A7D85B2C923831201DE5672FDBF608030C2E3E03A9764FD11F84A3D4D5DFCE93AE7740D41F126E77AC7299E1E245222B1855C9167BA4ABD6E887BA60144D2756E80A5CBF289C619A647F77AE961A563801BCE4514DE44DA8CFAFB875B2256A050E1A865711125C237949978153EB6A226E5B40F6A52C2FF2E6A2EB83A396E814DCD050B1509C0C301822808AE895220B8E601A9CD5F0762861004141009674495B2F4EF5B1A0E38139D702DD0B82F5C0B44B6C2B5C0F210B89E4A19F934D5A18ED7427ED39C773C70B6299345A23402A381C8A4316211254FDD1F2CFF74302C0F63C530CFBD5B194EBC9A35F699C422A90845B09591C56786C1242DA7138B5F7E40658E135373CD7201CA0868E5E5A6E296E14DF2227D59E4B9230DF29A9D158F26706A5BDA80659EFE9ED096FA56AA7A035914C1ACB1287434934BD3AC16F49621AC1A1C2FEB708A4EC8EB68852697248E3143D45AA3FC8DB3C8FAA2D9ABC5EE3D4398F1F07CD9D23A94DA969230DF911518AB281A353DA7422A0DC647A213C92C08AD6D35C076A0A910D4C0A41DA70263C576FD3B23316B51865E8343E53BDCB80A51ABD432A845B8832E6D480923A2A56ACC229684BCABF26CA3CEEA409D3E7B6373987886E2A66F3CCB3906444D570F0A447E643E2710591ED83D101D745F3B105D1C1AD5B6CEA8B1F0F2816D66A666749B79B72784E5BED640B51E1B9D580D37B5E568DB2783229CB16A8BB3F6492978479DF2A4BFA74EA91B76D4C9AC1E7618AD22626E2941541613A3684CF204DE3F645B193DDBE23AA8BBCE0698CD171BA9201CE90DA3C5AF6CC628C2B6DA7049385D8254590BEFE2A87B6C8CEAFF9EB1D99332604366E7171F4214E51BAADDFA19D32B7F26C27F22E2BB90ACBFAF73B2C7871D87C2177747EA8ADEA9EB657C3568D40AF0B7EA1FB576F3FBDE58DC922BEDCD5D49AC3F5E95985AD4AC09E58207B09EBABFA74463E7E2978782EEC0990BCC2063E7D0F963E768566A1B2768800205ED0E0AEC3797B6D63C7300E91F488FAC523BE767084205CEA99F25D319913E096CAFE93AB4557A3EF7992A0C9963F5FD2E2C41E8F34818962BA904162CABA7B91694FB3426AC61B55D738764116D52C9CF5C398318B84E0FB68143A46D6B314AD6867BFB1CD039EBF700A7AD31A985CE8E5A6BC0FE67C0191ECA9705CEB63EF08B03A7FD92C81ECDB75FE4E461EABA06CADA40AC6B8F3A3D6559F17DFB6D88C939CF605D37446D9CEF5BAF6ADA3977295E5FEC94D16142EF355579BFB4FDB6AA63C4B113BE35F8F6DE5235CC3607B1E11754838C2D6EC27A8C6D9F9DEC24655DB7BC94B13BDCC6D903139ED0DAB74BCC1092AE2A16FA4B2607BF7136CB3D177C191549C2D0A8D862343397A008B690E45428BA24BEC2651FA44CBF14DC1396E8293D7C84E082CF1315270A4D86F09135BE3CE854B34D7E7AE5D8D479328FD34BFD2F6102AA4975173CE76F13CA8252EFF3965EAA8385CE6179BFAF63A974DFBFDA949CAE223E9051EEBE32F5DE4218336426E77C419E611FDDEE247C8415F137C5DCDBCDA43F104DB74FCE28D11FD264CEA3A2C747C47010AE5FFF0305C9EA0AC21F0000 , N'6.5.1')
END

IF @CurrentMigration < '202412280913433_MakeChangesInVideoClass'
BEGIN
    IF object_id(N'[dbo].[FK_dbo.VideoGenres_dbo.Videos_Video_Id]', N'F') IS NOT NULL
        ALTER TABLE [dbo].[VideoGenres] DROP CONSTRAINT [FK_dbo.VideoGenres_dbo.Videos_Video_Id]
    IF object_id(N'[dbo].[FK_dbo.VideoGenres_dbo.Genres_Genre_Id]', N'F') IS NOT NULL
        ALTER TABLE [dbo].[VideoGenres] DROP CONSTRAINT [FK_dbo.VideoGenres_dbo.Genres_Genre_Id]
    IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_Video_Id' AND object_id = object_id(N'[dbo].[VideoGenres]', N'U'))
        DROP INDEX [IX_Video_Id] ON [dbo].[VideoGenres]
    IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_Genre_Id' AND object_id = object_id(N'[dbo].[VideoGenres]', N'U'))
        DROP INDEX [IX_Genre_Id] ON [dbo].[VideoGenres]
    ALTER TABLE [dbo].[Videos] ADD [genres_Id] [tinyint]
    CREATE INDEX [IX_genres_Id] ON [dbo].[Videos]([genres_Id])
    ALTER TABLE [dbo].[Videos] ADD CONSTRAINT [FK_dbo.Videos_dbo.Genres_genres_Id] FOREIGN KEY ([genres_Id]) REFERENCES [dbo].[Genres] ([Id])
    DROP TABLE [dbo].[VideoGenres]
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202412280913433_MakeChangesInVideoClass', N'EntityFramework.Migrations.Configuration',  0x1F8B0800000000000400D559DB6EE336107D2FD07F10F4D44BD6729297D6B0779175360B6337174449D0B78096C60AB114A592546AA3E897F5A19FD45FE8507751922D7BB7D9160102899C19CEE5702EF2DF7FFE357DB30E99F50C42D288CFECE3D1D8B6807B914F7930B313B57AF593FDE6F5B7DF4CDFF9E1DA7A28E84E351D727239B39F948A278E23BD2708891C85D413918C566AE445A143FCC839198F7F768E8F1D401136CAB2ACE96DC2150D217DC1D779C43D885542D865E40393F93AEEB8A954EB8A842063E2C1CC7E879C6A732170E5B7487CB2AD334609AAE1025BD916E13C5244A192937B09AE12110FDC181708BBDBC480742BC224E4CA4F2AF2A1768C4FB41D4EC55888F212A9A2704F81C7A7B9631C93FD20F7DAA5E3D07599A3B4D5A9FB66F67BE0022D374F9ACC99D0542DD78E6E4414E0CB8F29E391656C1F957040D4E8BF236B9E3095089871489420ECC8BA49968C7A1F6073177D023EE30963751D514BDC6B2CE0121E1B83509B5B58E59A2F7CDB729A7C8EC958B2D57832B3DE6E149A7D85679325831201CE5676FDBF108030C2EB605B9764FD1178A09E66363EDAD6055D835FACE452EF39C5DB834C4A24ED43AEC8330D52AF1BC73D531F22695BB7C0D26DF944E30CD3A307BDF518E81820C18588C2DB489B515F7FBC232200850A471D9B6E9408CF5066EA54F8D88A9A54D221A84919FFBFA85970757AD2019B9A0B5C1509C0CB018228F06F885220B89601A9CD5F0762C62108282012CE892ACFD2CF77341C70277AE15AA0F150B81688EC846B81E521703D9332F268AA431DAFC5F94D73DE71DFDAA64C1689D2088C062293C688453C7966FFD0F24F8FC0F2325602F3DCDB14381E8D8E4D336B06B5AF25D6494528E2AD0C2EBE338C27E9B8A058FFF23B2A73A898CA6B912E2823A695A39BBAB76C6FB21719ACC59EFBD260AFD959C96862A746D2852D3301EC886EA96FA5AA33504411CF9A88424733BF34CDEA007019C2AAC771B226A768869C9E6E687A49E2189344AD3BCA572C376B8DE6AFDCFDDB863093E178B2A37B28B52D4FC29447023076F168D4F4820AA934189744E792B91FB6C86A80ED415371500393ED3815182BC8F573C66296A30CBD8684CA77481884A8556A19D422DCC397F6A48411D15138E6114B42DE577CB67167A5A0CE9FADB4254C1D4371D3374ECB3906444D570F0A447E653E2710591ED83F103D7C5F3B107D121A05B72EA8B1F1F2816D66A666749B797747084BBA4181D239D5F050576E6DBB63507073215D31D6FE284FDE53A9BC661CA8D4DEDA6082F469DAC22CA46EC9CA766C90A966D16947BF557B4C92127B650D326ACD34CFFBBBC7F35621C8486C0B8DD749048B80BB910AC2912618B9BFB239A388F68AE09270BA02A9B2E6DFC621F9C418F2FF3B03B723A5CF864CDD2F3EBE28CA3754BBF533E65EFE4C84F744C47721597F5F97D41E3CF61C275FDC1DA92B76CE6B2FE3AB41439A8FCF6AD090D6399A3D7620A135212CB80FEB99FD7BCA39B116BF3C96CC47D6B5C0BB38B1C6D61F8745FEC0C92C1F36F61F9DDAEDFB21131DE20D84860361982DA512982F5B95F80667758FC68435746E578B2120D60E2CE5993BE71003D7E86C9835E4A0AD85B1146B5CA75DC6EF399DB66782ED13641EE8BEF9332B247833963AB2191CDF778F61A6E43CF87DA36997E487CE19F15F1D5B1BF6D766909D736A83A77BDCFE228369BB0940CCD4BEE4235E250D2A11BAB1E1E035D052D22CF82A2A706B6854901899ED1214C1B448CE84A22BE229DCF640CAF4BBD90361896E58C325F80B7E9DA838516832844BD6F80EA7C1BFEDFC74FA6EEA3CBD8ED34F5C5FC2045493EACC7ECDDF2694F9A5DE17EDCCDE2742DFAABC86E9582A5DCB824D29E92AE20305E5EE2B93C11D84314361F29ABBE4190ED1ED5EC2470888B7297AB97E21BB03D174FBF49C12FD5959E6322A7EFDEB94A37F9E7AFD0F2A74B065D01A0000 , N'6.5.1')
END

IF @CurrentMigration < '202412280936439_AddEnumInVedioClass'
BEGIN
    ALTER TABLE [dbo].[Videos] ADD [types] [int] NOT NULL DEFAULT 0
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202412280936439_AddEnumInVedioClass', N'EntityFramework.Migrations.Configuration',  0x1F8B0800000000000400D559DD6EDB3614BE1FB0771074B5ADA96527375B60B748DDA4305627419404BB0B68E958214A511A496536863DD92EF6487B851DEA5F946CCB4E966E28505824CFE1F9F9CE1FF3F79F7F8DDFAF42663D819034E2137B3418DA16702FF2290F2676A2966F7FB4DFBFFBF69BF1B91FAEACFBE2DC893E87945C4EEC47A5E253C791DE2384440E42EA8948464B35F0A2D0217EE41C0F873F39A39103C8C2465E9635BE49B8A221A41FF8398DB807B14A089B473E3099AFE38E9B72B52E490832261E4CEC73A454EB0B812BBF45E28B6D9D314A500C17D8D2B608E791220A853CBD93E02A11F1C08D7181B0DB750C786E4998845CF8D3EA785F3D86C75A0FA7222C5879895451B827C3D1496E18C7243FC8BC766938345D6628AD756ABE89FD09B840CDCD9B4EA74CE8532DD30EAE4514E0C79B94F0C832B68F4A38206AF4BF236B9A3095089870489420ECC8BA4E168C7A3FC3FA36FA027CC213C6EA32A294B8D758C025BC3606A1D637B0CC259FF9B6E534E91C93B024ABD1646A7D582B54FB12EF260B0625029CADE4FAFF8201C208C3C1B6E664F51978A01E2736FEB4AD0BBA02BF58C9B9DE718AD183444A24ED4B2EC9130D52AB1BD73D511F22695B37C0D26DF948E30CD3837BBDF510681FE0810B1185379156A3BEFE704B44000A058E3A36DD28119E21CCD8A9F0B1153529A743509312FE7F5133E3EAE4B803363513B82A1280C1018228F0AF895220B8E601A9CE5F0762C625082820123E1255DEA57FDFD270FF98503A8396126B6C4E1991922EA997817637C78D0150E0FBD0002830DE19004574F40B8024ACC1BFA5E14C5E30125485E4C0C07863307EB1404178F820D81AE1540772D30D7308172072155DCAB001B0AD7BC212FC1CB69CD638FD29627E7976B4FDECB5F625DAB33C7FDCF64166EDFAE29994914753B3D473508180E67DE7DCB7B6C1A1C26A9EC8E668441AA3D9D0D813FB8796021B189609B66298D7D326C3E160303295AC29D44EB5D8FB28427969B31B4C1E84618C920E6C614F93C34BE6E16F0AAF59BAA08CA8AAA0DE94BDA57B93BCA84A2DF2DC9606794DCF8A47337A6B47BAA2DB4CEA3BBC5BCA5B89EAF46451F8B3C6A290D1AC194DB53A5248E9C2AA6F75B2C6B568709D0D1DEE784EE21823B5D6F1E62B969BB5BBD3B7EEFEAD6098F1703CD9D11196D296376119230118BB78354A7A4185541A8C0BA293DDD40F5BC76A80DD80A6E2A20626DB7E2A30561CD7BF3312339366E8353854B6C383418852A59A41CDC31BE8D2398330223A9A8169C492906F6A28B65167E5BD4E9FADB4398C1D4370D3364ECB3806444D53F772441E32CF71449607F677C406BAAFED884D1C1A4D549D5163A33FBFBC91AA73CA975E1F1CCDECD644483377EF804179AE97B3755E36ACD2959FDBE6E805909C49174EB43DCA9BF7142AAF3B070AB5B73498647D9AB64133A91BEBB2E7ECA5AA59B8DADE6FD52FF34889BDB28E19F56A9CD78EDDCF36AD62921DB12D545E27222C24EE5A2A0807FAC0C0FD954D1945B45707E684D3254895F5BAF6F170746C3CFEFC771E621C297DD6E735E6D5C75AECC7713450CF7A0FE14F44788F447C1792D5F7754EED8174CF67865737476A8A9D73FCEBD8AAD7F0EEE36FF5ECE1FD1004D4128D01A5D69832C3117435B17F4F294FADD92F0F25F191752530984FADA1F5C761D039703CCC279EFDE7B7F60C71C858898005A1F14418A65B89F33B6D97F26B41B94763C21A32B7CB4D9F28D0062CF9993B1F2106AEE1DD50ABCF455B2B6BC9D688C75DCAEF3922B70793ED636CEEE84D4370568930B416DAB3191C3F75CF8226E7DCF99BE6E32ECEF79D83EABF3A3B37F4AF0D423B87E5064DF7CCFF22D371BB8B40CCD4FE4484789534A858E8CE8883D7404B7966C69751815B43A2E28891D9E6A008E6557226145D124FE1B60752A60FB2F9C3D579B8007FC6AF1215270A558670C11A0FBC1AFCDBEE4F9F009A328FAFE2F4E9EF25544031A92E0D57FC43426B0F7417EDCCBE89858EAABC086A5F2A5D0C8375C9E932E23D19E5E62B93C12D84314366F28ABBE4090E91ED4EC2670888B72E9AC1CD4C763BA269F6F1474AF4B3ACCC7954F4F88918F6C3D5BB7F00F26E8C07291D0000 , N'6.5.1')
END

